<!-- Travaux Configuration Section - Design avec couleur info (bleu) -->
<div id="travaux-config-section" class="travaux-config-section">
  
  <!-- Header avec toggle intégré -->
  <div id="travaux-config-header" class="travaux-config-header">
    <div class="travaux-header-left">
      <div class="travaux-icon-badge">
        <i class="fa-solid fa-helmet-safety"></i>
      </div>
      <div class="travaux-header-text">
        <h3>Travaux & Chantiers</h3>
        <span id="travaux-status-text" class="travaux-status-badge">Désactivé</span>
      </div>
    </div>
    
    <div class="travaux-header-right">
      <!-- Toggle utilisant le composant existant filter-switch -->
      <label class="filter-switch travaux-toggle" title="Activer/Désactiver les travaux">
        <input type="checkbox" id="travaux-enabled-toggle">
        <span class="switch-slider"></span>
      </label>
      
      <!-- Chevron pour expand/collapse -->
      <button type="button" id="travaux-expand-btn" class="btn-secondary btn-icon" aria-label="Développer les options">
        <i id="travaux-collapse-icon" class="fa-solid fa-chevron-down"></i>
      </button>
    </div>
  </div>

  <!-- Contenu collapsible -->
  <div id="travaux-config-content" class="travaux-config-content">
    
    <!-- Source des données -->
    <div class="filter-group">
      <label>
        <i class="fa-solid fa-database"></i>
        <span>Source des données</span>
      </label>
      <div class="travaux-source-options">
        <label class="travaux-source-option" data-source="city_travaux">
          <input type="radio" name="travaux-source" value="city_travaux" id="travaux-source-db" checked>
          <div class="travaux-source-content">
            <i class="fa-solid fa-pen-to-square"></i>
            <div>
              <strong>Base de données</strong>
              <small>Création et modification des chantiers</small>
            </div>
          </div>
        </label>
        <label class="travaux-source-option" data-source="url">
          <input type="radio" name="travaux-source" value="url" id="travaux-source-url">
          <div class="travaux-source-content">
            <i class="fa-solid fa-link"></i>
            <div>
              <strong>URL externe</strong>
              <small>Lecture seule depuis GeoJSON</small>
            </div>
          </div>
        </label>
      </div>
    </div>

    <!-- URL (conditionnel) -->
    <div id="travaux-url-field" class="filter-group travaux-url-field">
      <label for="travaux-url">
        <i class="fa-solid fa-globe"></i>
        <span>URL du GeoJSON</span>
      </label>
      <input type="url" id="travaux-url" placeholder="https://data.grandlyon.com/...">
    </div>

    <!-- Affichage -->
    <div class="travaux-field-row">
      <div class="filter-group">
        <label for="travaux-icon">
          <i class="fa-solid fa-icons"></i>
          <span>Icône</span>
        </label>
        <div class="travaux-icon-picker">
          <div id="travaux-icon-preview" class="travaux-icon-preview">
            <i class="fa-solid fa-helmet-safety"></i>
          </div>
          <input type="text" id="travaux-icon" value="fa-solid fa-helmet-safety" readonly>
          <button type="button" id="travaux-icon-picker-btn" class="btn-secondary btn-small">
            <i class="fa-solid fa-palette"></i>
          </button>
        </div>
      </div>

      <div class="filter-group">
        <label for="travaux-order">
          <i class="fa-solid fa-sort"></i>
          <span>Ordre</span>
        </label>
        <input type="number" id="travaux-order" value="5" min="0" step="1" class="travaux-input-number">
      </div>
    </div>

    <!-- Layers associés -->
    <div class="filter-group">
      <label>
        <i class="fa-solid fa-layer-group"></i>
        <span>Layers associés</span>
        <span class="travaux-field-optional">(optionnel)</span>
      </label>
      <div id="travaux-layers-checkboxes" class="travaux-layers-grid">
        <!-- Checkboxes peuplées dynamiquement -->
      </div>
    </div>

    <!-- Status de sauvegarde -->
    <div id="travaux-config-status" class="travaux-save-status">
      <i class="fa-solid fa-circle-check"></i>
      <span>Modifications enregistrées automatiquement</span>
    </div>
  </div>
</div>

<!-- Styles pour le module Travaux (couleur info = bleu) -->
<style>
/* Section container */
.travaux-config-section {
  display: none;
  margin-top: 24px;
}

/* Header avec toggle intégré */
.travaux-config-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: var(--info-alpha-05);
  border-radius: 12px;
  border: 1px solid var(--info-alpha-15);
  transition: all 0.2s ease;
}

.travaux-config-header:hover {
  border-color: var(--info-alpha-25);
}

.travaux-header-left {
  display: flex;
  align-items: center;
  gap: 14px;
}

/* Badge icône avec couleur info (bleu) */
.travaux-icon-badge {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--info);
  border-radius: 12px;
  box-shadow: 0 4px 12px var(--info-alpha-25);
}

.travaux-icon-badge i {
  color: white;
  font-size: 20px;
}

.travaux-header-text h3 {
  margin: 0 0 4px 0;
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
}

.travaux-status-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 10px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 20px;
  background: var(--gray-200);
  color: var(--text-tertiary);
  transition: all 0.3s ease;
}

.travaux-status-badge.is-active {
  background: var(--info-alpha-15);
  color: var(--info);
}

.travaux-header-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Override toggle pour utiliser info au lieu de primary */
.travaux-toggle.filter-switch {
  padding: 0;
  background: transparent;
}

.travaux-toggle input:checked ~ .switch-slider {
  background: var(--info);
}

/* Bouton expand */
.travaux-config-header .btn-icon {
  width: 36px;
  height: 36px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.travaux-config-header .btn-icon i {
  transition: transform 0.3s ease;
}

.travaux-config-header .btn-icon.is-expanded i {
  transform: rotate(180deg);
}

/* Contenu collapsible */
.travaux-config-content {
  display: none;
  padding: 20px;
  margin-top: 12px;
  background: var(--white);
  border-radius: 12px;
  border: 1px solid var(--border-light);
  animation: travaux-slideDown 0.3s ease;
}

@keyframes travaux-slideDown {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Override filter-group pour utiliser info */
.travaux-config-content .filter-group label i {
  color: var(--info);
}

.travaux-config-content .filter-group select:focus,
.travaux-config-content .filter-group input:focus {
  border-color: var(--info);
  box-shadow: 0 0 0 3px var(--info-alpha-15);
}

.travaux-field-optional {
  font-weight: 400;
  text-transform: none;
  color: var(--text-tertiary);
}

/* Source options avec couleur info */
.travaux-source-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.travaux-source-option {
  position: relative;
  cursor: pointer;
}

.travaux-source-option input {
  position: absolute;
  opacity: 0;
}

.travaux-source-content {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  border: 2px solid var(--border-light);
  border-radius: 10px;
  background: var(--white);
  transition: all 0.2s ease;
}

.travaux-source-content i {
  font-size: 20px;
  color: var(--text-tertiary);
  transition: color 0.2s ease;
}

.travaux-source-content strong {
  display: block;
  font-size: 13px;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.travaux-source-content small {
  font-size: 11px;
  color: var(--text-tertiary);
}

.travaux-source-option input:checked + .travaux-source-content {
  border-color: var(--info);
  background: var(--info-alpha-05);
}

.travaux-source-option input:checked + .travaux-source-content i {
  color: var(--info);
}

.travaux-source-option:hover .travaux-source-content {
  border-color: var(--border-medium);
}

/* URL field conditionnel */
.travaux-url-field {
  display: none;
}

.travaux-url-field.is-visible {
  display: flex;
}

/* Field row */
.travaux-field-row {
  display: grid;
  grid-template-columns: 1fr 100px;
  gap: 16px;
  margin-bottom: 16px;
}

/* Icon picker */
.travaux-icon-picker {
  display: flex;
  gap: 8px;
  align-items: stretch;
}

.travaux-icon-preview {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--info-alpha-10);
  border: 2px solid var(--info-alpha-20);
  border-radius: 10px;
  font-size: 22px;
  color: var(--info);
  flex-shrink: 0;
}

.travaux-icon-picker input {
  flex: 1;
  font-family: monospace;
  font-size: 12px;
  cursor: pointer;
  padding: 12px;
  border: 1px solid var(--border-medium);
  border-radius: 6px;
  background: var(--surface-base);
}

.travaux-input-number {
  text-align: center;
  font-weight: 600;
  padding: 12px;
  border: 1px solid var(--border-medium);
  border-radius: 6px;
  background: var(--surface-base);
}

/* Layers grid */
.travaux-layers-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 14px;
  border: 1px solid var(--border-light);
  border-radius: 10px;
  background: var(--surface-base);
  min-height: 50px;
}

/* Save status avec couleur info */
.travaux-save-status {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  margin-top: 16px;
  font-size: 13px;
  color: var(--info);
  background: var(--info-alpha-10);
  border-radius: 8px;
  opacity: 0;
  transform: translateY(-4px);
  transition: all 0.3s ease;
}

.travaux-save-status.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.travaux-save-status.is-error {
  color: var(--danger);
  background: var(--danger-alpha-10);
}

.travaux-save-status.is-saving {
  color: var(--info);
  background: var(--info-alpha-10);
}
</style>
